<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ChatBot | Voiceflow</title>

    <style>
      body {
        margin: 0;
        background-color: #0b0b0b;
        color: #fff;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        overflow: hidden;
        font-family: Arial, sans-serif;
      }

      .chatbot-container {
        width: 100%;
        height: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .error {
        color: #ff5555;
        text-align: center;
      }
    </style>
  </head>

  <body>
    <div class="chatbot-container">
      <div id="chatbot"></div>

      <div id="error" class="error" style="display: none;">
        Failed to load chat. Please try again later.
      </div>
    </div>

    <script type="module">
      const chatbotContainer = document.getElementById("chatbot");
      const error = document.getElementById("error");

      const loadVoiceflow = () => {
        const script = document.createElement("script");
        script.src = "https://cdn.voiceflow.com/widget-next/bundle.mjs";
        script.type = "text/javascript";
        script.async = true;

        script.onload = () => {
          if (window.voiceflow && window.voiceflow.chat) {
            window.voiceflow.chat.load({
              verify: { projectID: "687bac72822de29a91abc9ee" },
              url: "https://general-runtime.voiceflow.com",
              versionID: "production",
              voice: {
                url: "https://runtime-api.voiceflow.com",
              },
              render: {
                mode: "embedded",
                target: chatbotContainer,
              },
            });
          } else {
            error.style.display = "block";
          }
        };

        script.onerror = () => {
          error.style.display = "block";
        };

        document.body.appendChild(script);
      };

      // Slight delay to ensure DOM ready
      setTimeout(loadVoiceflow, 500);
    </script>
  </body>
</html>
